import { useNavigate } from "react-router";
import { useDispatch } from "react-redux";

export const LogOut = () => {
  const navigate = useNavigate();
  const dispatch = useDispatch();

  //  reset the liked businesses state in Redux store and reloads the current window.
  const reload = () => {
    dispatch({ type: "liked/changeState", payload: {} });
    window.location.reload();
  };

  const logOut = () => {
    reload();
    localStorage.removeItem("jwt");
    localStorage.removeItem("role");
    navigate("/login", { replace: true });
  };

  return (
    <div onClick={logOut} onTouchEnd={logOut} id="log-out">
      <svg
        width="50"
        viewBox="0 0 51 51"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <rect
          x="1.51089"
          y="2.39734"
          width="47"
          height="47"
          rx="8.5"
          fill="#AA283C"
          stroke="black"
          stroke-width="3"
        />
        <mask id="path-2-inside-1_239_116" fill="white">
          <path d="M15.7772 9.57568H30.5213V29.5757H15.7772V9.57568Z" />
        </mask>
        <path
          d="M15.7772 9.57568V6.57568H12.7772V9.57568H15.7772ZM15.7772 29.5757H12.7772V32.5757H15.7772V29.5757ZM15.7772 12.5757H30.5213V6.57568H15.7772V12.5757ZM30.5213 26.5757H15.7772V32.5757H30.5213V26.5757ZM18.7772 29.5757V9.57568H12.7772V29.5757H18.7772Z"
          fill="black"
          mask="url(#path-2-inside-1_239_116)"
        />
        <path
          d="M36.126 20.6695C36.3239 20.4771 36.3282 20.1606 36.1356 19.9624L32.997 16.7334C32.8045 16.5353 32.4879 16.5306 32.29 16.7229C32.0921 16.9152 32.0878 17.2318 32.2804 17.4299L35.0702 20.3002L32.2038 23.0863C32.0059 23.2786 32.0016 23.5952 32.1942 23.7933C32.3868 23.9915 32.7034 23.9962 32.9012 23.8038L36.126 20.6695ZM21.7398 20.6019L35.7705 20.8107L35.784 19.8108L21.7534 19.602L21.7398 20.6019Z"
          fill="black"
        />
        <path
          d="M12.7765 42.2739V43.4634H9.23158V42.2739H12.7765ZM9.60658 34.9321V43.4634H8.18275V34.9321H9.60658ZM13.6027 40.5513V40.0415C13.6027 39.5493 13.6632 39.1138 13.7843 38.7349C13.9054 38.356 14.0773 38.0396 14.2999 37.7856C14.5265 37.5278 14.7921 37.3345 15.0968 37.2056C15.4015 37.0728 15.7374 37.0063 16.1046 37.0063C16.4796 37.0063 16.8195 37.0728 17.1242 37.2056C17.4328 37.3345 17.6984 37.5278 17.921 37.7856C18.1476 38.0396 18.3214 38.356 18.4425 38.7349C18.5636 39.1138 18.6242 39.5493 18.6242 40.0415V40.5513C18.6242 41.0435 18.5636 41.479 18.4425 41.8579C18.3214 42.2368 18.1476 42.5552 17.921 42.813C17.6984 43.0669 17.4347 43.2583 17.13 43.3872C16.8253 43.5161 16.4874 43.5806 16.1163 43.5806C15.7492 43.5806 15.4113 43.5161 15.1027 43.3872C14.798 43.2583 14.5324 43.0669 14.3058 42.813C14.0792 42.5552 13.9054 42.2368 13.7843 41.8579C13.6632 41.479 13.6027 41.0435 13.6027 40.5513ZM14.9679 40.0415V40.5513C14.9679 40.8677 14.9953 41.145 15.0499 41.3833C15.1046 41.6177 15.1828 41.813 15.2843 41.9692C15.3859 42.1255 15.507 42.2427 15.6476 42.3208C15.7882 42.3989 15.9445 42.438 16.1163 42.438C16.3078 42.438 16.4738 42.3989 16.6144 42.3208C16.7589 42.2427 16.8781 42.1255 16.9718 41.9692C17.0695 41.813 17.1417 41.6177 17.1886 41.3833C17.2355 41.145 17.2589 40.8677 17.2589 40.5513V40.0415C17.2589 39.729 17.2316 39.4556 17.1769 39.2212C17.1222 38.9829 17.0441 38.7856 16.9425 38.6294C16.841 38.4692 16.7179 38.3501 16.5734 38.272C16.4328 38.1938 16.2765 38.1548 16.1046 38.1548C15.9367 38.1548 15.7824 38.1938 15.6417 38.272C15.505 38.3501 15.3859 38.4692 15.2843 38.6294C15.1828 38.7856 15.1046 38.9829 15.0499 39.2212C14.9953 39.4556 14.9679 39.729 14.9679 40.0415ZM23.1828 37.1235H24.4191V43.4868C24.4191 44.0571 24.3136 44.5239 24.1027 44.8872C23.8956 45.2544 23.6066 45.5259 23.2355 45.7017C22.8644 45.8774 22.4347 45.9653 21.9464 45.9653C21.7667 45.9653 21.5538 45.936 21.3078 45.8774C21.0617 45.8188 20.8214 45.7329 20.5871 45.6196C20.3527 45.5063 20.1574 45.3657 20.0011 45.1978L20.4992 44.2485C20.6828 44.436 20.8996 44.5806 21.1496 44.6821C21.3996 44.7876 21.6398 44.8403 21.8703 44.8403C22.1203 44.8403 22.3312 44.7974 22.5031 44.7114C22.6788 44.6294 22.8136 44.4907 22.9074 44.2954C23.0011 44.104 23.048 43.8442 23.048 43.5161V38.5591L23.1828 37.1235ZM19.5968 40.5513V40.0532C19.5968 39.5337 19.6456 39.0845 19.7433 38.7056C19.841 38.3228 19.9816 38.0044 20.1652 37.7505C20.3488 37.4966 20.5734 37.3091 20.839 37.188C21.1046 37.0669 21.4015 37.0063 21.7296 37.0063C22.0695 37.0063 22.3566 37.0786 22.591 37.2231C22.8292 37.3638 23.0226 37.5649 23.171 37.8267C23.3234 38.0884 23.4425 38.4009 23.5285 38.7642C23.6144 39.1235 23.6769 39.5259 23.716 39.9712V40.6626C23.6769 41.0923 23.6105 41.4868 23.5167 41.8462C23.423 42.2017 23.296 42.5083 23.1359 42.7661C22.9796 43.0239 22.7843 43.2251 22.5499 43.3696C22.3195 43.5103 22.0421 43.5806 21.7179 43.5806C21.3937 43.5806 21.1007 43.5161 20.839 43.3872C20.5773 43.2583 20.3527 43.0669 20.1652 42.813C19.9816 42.5591 19.841 42.2446 19.7433 41.8696C19.6456 41.4907 19.5968 41.0513 19.5968 40.5513ZM20.9621 40.0532V40.5513C20.9621 40.8755 20.9835 41.1548 21.0265 41.3892C21.0734 41.6235 21.1417 41.8169 21.2316 41.9692C21.3214 42.1177 21.4386 42.229 21.5831 42.3032C21.7277 42.3735 21.8996 42.4087 22.0988 42.4087C22.3605 42.4087 22.5714 42.3462 22.7316 42.2212C22.8956 42.0962 23.0206 41.9282 23.1066 41.7173C23.1964 41.5024 23.2589 41.2642 23.2941 41.0024V39.6372C23.2746 39.4302 23.2355 39.2388 23.1769 39.063C23.1222 38.8833 23.046 38.7271 22.9484 38.5942C22.8546 38.4614 22.7374 38.3579 22.5968 38.2837C22.4601 38.2056 22.298 38.1665 22.1105 38.1665C21.9152 38.1665 21.7433 38.2056 21.5949 38.2837C21.4503 38.3579 21.3312 38.4731 21.2374 38.6294C21.1437 38.7817 21.0734 38.9771 21.0265 39.2153C20.9835 39.4497 20.9621 39.729 20.9621 40.0532ZM28.3566 40.5513V40.0415C28.3566 39.5493 28.4171 39.1138 28.5382 38.7349C28.6593 38.356 28.8312 38.0396 29.0538 37.7856C29.2804 37.5278 29.546 37.3345 29.8507 37.2056C30.1554 37.0728 30.4913 37.0063 30.8585 37.0063C31.2335 37.0063 31.5734 37.0728 31.8781 37.2056C32.1867 37.3345 32.4523 37.5278 32.6749 37.7856C32.9015 38.0396 33.0753 38.356 33.1964 38.7349C33.3175 39.1138 33.3781 39.5493 33.3781 40.0415V40.5513C33.3781 41.0435 33.3175 41.479 33.1964 41.8579C33.0753 42.2368 32.9015 42.5552 32.6749 42.813C32.4523 43.0669 32.1886 43.2583 31.8839 43.3872C31.5792 43.5161 31.2413 43.5806 30.8703 43.5806C30.5031 43.5806 30.1652 43.5161 29.8566 43.3872C29.5519 43.2583 29.2863 43.0669 29.0597 42.813C28.8331 42.5552 28.6593 42.2368 28.5382 41.8579C28.4171 41.479 28.3566 41.0435 28.3566 40.5513ZM29.7218 40.0415V40.5513C29.7218 40.8677 29.7492 41.145 29.8038 41.3833C29.8585 41.6177 29.9367 41.813 30.0382 41.9692C30.1398 42.1255 30.2609 42.2427 30.4015 42.3208C30.5421 42.3989 30.6984 42.438 30.8703 42.438C31.0617 42.438 31.2277 42.3989 31.3683 42.3208C31.5128 42.2427 31.632 42.1255 31.7257 41.9692C31.8234 41.813 31.8956 41.6177 31.9425 41.3833C31.9894 41.145 32.0128 40.8677 32.0128 40.5513V40.0415C32.0128 39.729 31.9855 39.4556 31.9308 39.2212C31.8761 38.9829 31.798 38.7856 31.6964 38.6294C31.5949 38.4692 31.4718 38.3501 31.3273 38.272C31.1867 38.1938 31.0304 38.1548 30.8585 38.1548C30.6906 38.1548 30.5363 38.1938 30.3956 38.272C30.2589 38.3501 30.1398 38.4692 30.0382 38.6294C29.9367 38.7856 29.8585 38.9829 29.8038 39.2212C29.7492 39.4556 29.7218 39.729 29.7218 40.0415ZM37.6847 41.9692V37.1235H39.0499V43.4634H37.7609L37.6847 41.9692ZM37.8781 40.645L38.3117 40.6333C38.3117 41.0591 38.2726 41.4517 38.1945 41.811C38.1163 42.1704 37.9953 42.4829 37.8312 42.7485C37.671 43.0103 37.4621 43.2153 37.2042 43.3638C36.9503 43.5083 36.6456 43.5806 36.2902 43.5806C36.0285 43.5806 35.7882 43.5356 35.5695 43.4458C35.3546 43.356 35.1691 43.2173 35.0128 43.0298C34.8605 42.8423 34.7413 42.5981 34.6554 42.2974C34.5695 41.9966 34.5265 41.6372 34.5265 41.2192V37.1235H35.8917V41.231C35.8917 41.4575 35.9113 41.647 35.9503 41.7993C35.9894 41.9478 36.0441 42.0688 36.1144 42.1626C36.1847 42.2524 36.2628 42.3169 36.3488 42.356C36.4386 42.3911 36.5343 42.4087 36.6359 42.4087C36.9445 42.4087 37.1886 42.3325 37.3683 42.1802C37.5519 42.0239 37.6828 41.813 37.7609 41.5474C37.839 41.2817 37.8781 40.981 37.8781 40.645ZM42.9757 37.1235V38.1782H39.8644V37.1235H42.9757ZM40.714 35.5708H42.0734V41.6938C42.0734 41.8892 42.0949 42.0376 42.1378 42.1392C42.1808 42.2407 42.2413 42.3091 42.3195 42.3442C42.3976 42.3794 42.4894 42.397 42.5949 42.397C42.673 42.397 42.7492 42.3911 42.8234 42.3794C42.9015 42.3638 42.9581 42.3501 42.9933 42.3384V43.4399C42.8917 43.479 42.7746 43.5122 42.6417 43.5396C42.5089 43.5669 42.3488 43.5806 42.1613 43.5806C41.8839 43.5806 41.6359 43.5239 41.4171 43.4106C41.1984 43.2935 41.0265 43.104 40.9015 42.8423C40.7765 42.5767 40.714 42.2251 40.714 41.7876V35.5708Z"
          fill="#F0F0F0"
        />
      </svg>
    </div>
  );
};
